---
name: Titanium.UI.iOS.LivePhotoView
summary: |
    A view to display a [LivePhoto](Titanium.UI.iOS.LivePhoto) object introduced in iOS 9.1.
description: |    
    Use the <Titanium.UI.createLivePhotoView> method to create an new `LivePhotoView`.
    
    Specifying either a `width` or `height` property for this view will scale its `livePhoto` with 
    the aspect ratio maintained, up to a maximum size that does not exceed its parent view.
    
    For more infos on live photos, refer to the official [Apple documentation](https://developer.apple.com/library/prerelease/ios/documentation/PhotosUI/Reference/PHLivePhotoView_Class/index.html).

extends: Titanium.UI.View
platforms: [iphone,ipad]
since: "5.2.0"
osver: {ios:{min: "9.1"}}

properties:
  - name: muted
    summary: Determines if the playback should be muted (`true`) or not (`false`).
    type: Boolean

methods:   
  - name: startWithPlaybackStyle
    summary: Starts the playback of a live photo.

  - name: stopPlayback
    summary: Stops a current live photo playback.

events:
  - name: start
    summary: Fired when the live photo playback starts.
    properties:
      - name: playbackStyle
        summary: Returns the playback style that was provided to start the playback.
        type: Number

  - name: stop
    summary: Fired when the live photo playback stops.
    properties:
      - name: playbackStyle
        summary: Returns the playback style that was provided to start the playback.
        type: Number

properties:
  - name: livePhoto
    summary: The live photo to display.
    description: |
        You receive a new live photo object either by taking a new photo or
        by selecting an existing photo from the photo gallery.
    type: [Titanium.UI.iOS.LivePhoto]

examples:
  - title: Basic LivePhotoView
    example: |
        // The following example shows how to create a simple Ti.UI.iOS.LivePhotoView:
        
        var window = Ti.UI.createWindow({
            backgroundColor: "white"
        });

        var btn1 = Ti.UI.createButton({
            title: "Select live photo!",
            top: 30
        });

        btn1.addEventListener("click", openGallery);
        window.add(btn1);
        window.open();

        function openGallery() {
            Ti.Media.openPhotoGallery({
                mediaTypes: [Ti.Media.MEDIA_TYPE_PHOTO, Ti.Media.MEDIA_TYPE_LIVEPHOTO],
                success: function(e) {
                    var livePhoto = e.livePhoto // Live photo of type Ti.UI.iOS.LivePhoto

                    if (livePhoto) {
                        var livePhotoView = Ti.UI.iOS.createLivePhotoView({
                            livePhoto: livePhoto,
                            muted: true,
                            width: 300
                        });

                        livePhotoView.addEventListener("start", function(e) {
                            Ti.API.warn("-- Start playback --");
                            Ti.API.warn(e);
                        });

                        livePhotoView.addEventListener("stop", function(e) {
                            Ti.API.warn("-- Stop playback --");
                            Ti.API.warn(e);
                        });
                     window.add(livePhotoView);
                    }
                }
            });
        }