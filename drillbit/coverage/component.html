<%def name="percent(c1, c2)">\
${"%.2f" % (100 * (c1 / float(c2)))}\
</%def>

<%
columns = len(categories) + 1
%>

<%def name="apiRows(apis)">
	<%
		ak = apis.keys()
		ak.sort()
	%>
	% for api in ak:
		<tr>
			<td class="api bordered">${api}</td>
			% for category in categories:
				<%
				yesno="no"
				if category in apis[api]: yesno = "yes"
				%>
				<td class="${yesno} bordered">${upperFirst(yesno)}</td>
			% endfor
		</tr>
	% endfor
</%def>

<%def name="categoryColumns(label)">
	<tr>
		<th class="bordered">${label}</th>
		% for category in categories:
			<th class="bordered">${categoryDesc[category]}</th>
		% endfor
	</tr>
</%def>

<html>
	<head><link rel="stylesheet" href="coverage.css" type="text/css"/></head>
	<body>
		<h2>${label} ${component}</h2>
		<%
		totalCount = 0
		categoryYes = {}
		for category in categories:
			yes, no = countCoverage(components, component, category)
			totalCount = yes + no
			categoryYes[category] = yes
		%>
		<b>Total API Count</b>:
			<span id="android-apis">${totalCount}</span> APIs<br/>

		<b>Android TDoc Coverage</b>:
			<span id="android-doc-coverage">
				${percent(categoryYes["androidTDoc"], totalCount)}%
			</span>
			(<span id="android-doc-apis">${categoryYes["androidTDoc"]}</span> Documented APIs)<br/>

		<b>Android Binding Coverage</b>:
			<span id="android-binding-coverage">
				${percent(categoryYes["androidBinding"], totalCount)}%
			</span> (<span id="android-binding-apis">${categoryYes["androidBinding"]}</span> Bound APIs)<br/>

		<b>Android Drillbit Coverage</b>:
		<span id="android-test-coverage">
			${percent(categoryYes["androidDrillbit"], totalCount)}%
		</span> (<span id="android-test-apis">${categoryYes["androidDrillbit"]}</span> Unit Tested APIs)<br/><br/>

		<a href="index.html">&lt;&lt; Back to Coverage Summary</a><br/><br/>

		<table class="bordered">
			% if "properties" in components[component]:
				${categoryColumns("Property")}
				${apiRows(components[component]["properties"])}
			% endif
			% if "functions" in components[component]:
				${categoryColumns("Function")}
				${apiRows(components[component]["functions"])}
			% endif
		</table>
	</body>
</html>